<!DOCTYPE html>
<html><head><meta charset="utf-8" /><meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" /><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport" /><link href="/images/favicon.ico?1517670210" rel="icon" type="image/ico" /><link href="http://blog.glebm.com/feed.xml" rel="alternate" title="Gleb's Notes Feed" type="application/atom+xml" /><title>Gleb's Notes</title><link href="/stylesheets/application.css?1517670210" rel="stylesheet" /><link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" /><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script src="/javascripts/application.js?1517670210"></script>
</head><body><script type="text/javascript">      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-43451052-1', 'blog.glebm.com');
      ga('send', 'pageview');
</script><header class="navbar navbar-dark bg-primary"><nav class="container"><div class="navbar-brand"><a href="/">Gleb's Notes</a></div><ul class="navbar-nav mr-auto"><li class="nav-item active"><a href="/" class="nav-link">Index<span class="sr-only">(current)</span></a></li></ul></nav></header><div class="container"><div class="row"><div class="col-md-9 col-lg-9"><div class="animated fade-in" id="main" role="main"><article class="blog-article"><div class="article-header"><h2 class="article-title"><a href="http://blog.glebm.com/2016/03/31/db-text-search.html">Database-agnostic case-insensitive equality, full text search</a></h2><div class="article-date"><span class='date'> <span class='day'>31</span> <span class='month'>Mar</span> <span class='year'> 2016 </span> </span></div></div><div class="article-body"><p>Different relational databases treat text search very differently.
The new <a href="https://github.com/thredded/db_text_search">DbTextSearch gem</a> provides a unified interface on top of ActiveRecord for SQLite, MySQL, and
PostgreSQL to do:</p>

<ul>
  <li>Case-insensitive string-in-set querying, and CI index creation.</li>
  <li>Basic full-text search for a list of terms, and FTS index creation.</li>
</ul>

<p><a href="https://github.com/thredded/db_text_search">DbTextSearch</a> does all the heavy lifting under the hood, hiding the complexity of handling each
database differently away, which is great for gem authors, when migrating an application from one database to another,
or writing code that must support multiple databases.</p>

<p></p><a class="btn btn-outline-primary btn-lg read-more" href="http://blog.glebm.com/2016/03/31/db-text-search.html">Read more <i class='fa fa-angle-right'></i></a></div></article><article class="blog-article"><div class="article-header"><h2 class="article-title"><a href="http://blog.glebm.com/2014/02/27/i18n-made-easier-with-static-analysis.html">Internationalization made easier with static analysis</a></h2><div class="article-date"><span class='date'> <span class='day'>27</span> <span class='month'>Feb</span> <span class='year'> 2014 </span> </span></div></div><div class="article-body"><p><a href="https://github.com/glebm/i18n-tasks" title="glebm/i18n-tasks on Github">i18n-tasks</a> finds and manages missing and unused translations in your application.
The default approach to locale data management with gems such as <a href="https://github.com/svenfuchs/i18n" title="svenfuchs/i18n on Github">i18n</a> is flawed.
If you use a key that does not exist, this will only blow up at runtime. Keys left over from removed code accumulate
in the resource files and introduce unnecessary overhead on the translators. Translation files can quickly turn to disarray.</p>

<p>i18n-tasks improves this by using static analysis. It scans calls such as <code>I18n.t('some.key')</code> and provides reports on key usage, missing, and unused keys.
It can also can pre-fill missing keys, including from Google Translate, and it can remove unused keys as well.</p>

<p>i18n-tasks can be used with any project using <a href="https://github.com/svenfuchs/i18n" title="svenfuchs/i18n on Github">i18n</a> (default in Rails).</p>

<p></p><a class="btn btn-outline-primary btn-lg read-more" href="http://blog.glebm.com/2014/02/27/i18n-made-easier-with-static-analysis.html">Read more <i class='fa fa-angle-right'></i></a></div></article><article class="blog-article"><div class="article-header"><h2 class="article-title"><a href="http://blog.glebm.com/2013/08/31/redis-compressed-lists.html">Save Redis memory with large list packing</a></h2><div class="article-date"><span class='date'> <span class='day'>31</span> <span class='month'>Aug</span> <span class='year'> 2013 </span> </span></div></div><div class="article-body"><p>Redis is great for storing certain types of data that do not do well in a relational database.
It is great for storing caches and statistics too.
However, the storage capacity of redis is capped by RAM size, so care is required when storing large amounts of data in it.</p>

<p>I will show you a trick to reduce memory usage and improve the speed of the redis <em>list</em> type for storing series-type data (e.g. time series).
Redis <a href="https://github.com/antirez/redis/blob/unstable/src/ziplist.c">packs</a> small lists of ints, reducing their memory usage by 10-40%.
The exact list size threshold at which redis stops compressing is defined by the <code>list-max-ziplist-entries</code> setting and defaults to 512.</p>

<p>Here is the trick: we will transparently partition a list into many small lists of <code>list-max-ziplist-entries</code> size.
By storing lists under the threshold, we take advantage of redis' ability to pack them.</p>

<p></p><a class="btn btn-outline-primary btn-lg read-more" href="http://blog.glebm.com/2013/08/31/redis-compressed-lists.html">Read more <i class='fa fa-angle-right'></i></a></div></article><article class="blog-article"><div class="article-header"><h2 class="article-title"><a href="http://blog.glebm.com/2013/08/28/inline-css-fonts.html">Inline CSS web fonts</a></h2><div class="article-date"><span class='date'> <span class='day'>28</span> <span class='month'>Aug</span> <span class='year'> 2013 </span> </span></div></div><div class="article-body"><p>If you serve web fonts via URL, the browser makes a separate request for every web font.</p>

<p>This is what the timeline looks like for a URL referenced font:</p>

<p><img src="http://blog.glebm.com/images/2013-08-28-inline-css-fonts/tl-body.png" class="img-fluid" width="469" height="281" alt="Tl body"></p>

<h4 class="text-center">
  <span style="color: rgba(0, 0, 255, 0.67)">Ready</span> <span style="color: rgba(255, 0, 0, 0.78)">Load</span>
</h4>

<p>Fonts included from stylesheets cause extra requests that only starts once the DOM has loaded.
This causes a delay and flash of missing text or a font change flash while the fonts are loading.</p>

<p>However, you can avoid extra requests <em>and</em> rendering issues if you inline the fonts as data-uris.</p>

<p></p><a class="btn btn-outline-primary btn-lg read-more" href="http://blog.glebm.com/2013/08/28/inline-css-fonts.html">Read more <i class='fa fa-angle-right'></i></a></div></article><article class="blog-article"><div class="article-header"><h2 class="article-title"><a href="http://blog.glebm.com/2013/08/23/screenshots-in-git.html">Store screenshots of your web app in Git</a></h2><div class="article-date"><span class='date'> <span class='day'>23</span> <span class='month'>Aug</span> <span class='year'> 2013 </span> </span></div></div><div class="article-body"><iframe style="max-width:100%" width="600" height="340" src="//www.youtube.com/embed/VMhdKZDxFjg" frameborder="0" allowfullscreen=""></iframe>

<p>Have you ever had a change break your site? Even when the tests pass?</p>

<ul>
  <li>Testing functionality is hard</li>
  <li>Testing UI is even harder</li>
</ul>

<p>What if every time you commit, you got a visual diff of every web page that changed?
It is surprisingly easy to do.</p>

<p><img src="http://blog.glebm.com/images/2013-08-23-screenshots-in-git/gh-img-diff-1.png" class="img-fluid" width="828" height="296" alt="Gh img diff 1"></p>

<p></p><a class="btn btn-outline-primary btn-lg read-more" href="http://blog.glebm.com/2013/08/23/screenshots-in-git.html">Read more <i class='fa fa-angle-right'></i></a></div></article></div></div><div class="col-md-3"><aside class="sidebar"><div class="text-center"><div class="person-img"><img src='http://blog.glebm.com/images/author.jpg' class="img-fluid rounded-circle" width="883" height="883" alt="Author" /></div><p><abbr title="Gleb Mazovetskiy">@glebm</abbr></p><p><ul class="nav nav-fill nav-pills"><li class="nav-item"><a class="nav-link" href="https://twitter.com/glebm" rel="me"><i class='fa fa-twitter'></i> Twitter</a></li><li class="nav-item"><a class="nav-link" href="https://github.com/glebm" rel="me"><i class='fa fa-github'></i> Github</a></li></ul></p></div><hr /><h3>Posts</h3><ul class="nav nav-pills flex-column"><li class="nav-item"><a class="nav-link" href="http://blog.glebm.com/2016/03/31/db-text-search.html">Database-agnostic case-insensitive equality, full text search</a></li><li class="nav-item"><a class="nav-link" href="http://blog.glebm.com/2014/02/27/i18n-made-easier-with-static-analysis.html">Internationalization made easier with static analysis</a></li><li class="nav-item"><a class="nav-link" href="http://blog.glebm.com/2013/08/31/redis-compressed-lists.html">Save Redis memory with large list packing</a></li><li class="nav-item"><a class="nav-link" href="http://blog.glebm.com/2013/08/28/inline-css-fonts.html">Inline CSS web fonts</a></li><li class="nav-item"><a class="nav-link" href="http://blog.glebm.com/2013/08/23/screenshots-in-git.html">Store screenshots of your web app in Git</a></li></ul><hr /><ul class="nav flex-column text-left"><li class="nav-item"><a class="nav-link" href="http://blog.glebm.com/feed.xml"><i class='fa fa-rss fa-fw'></i> Atom Feed</a></li><li class="nav-item"><a class="nav-link" href="https://github.com/glebm/blog-glebm-com"><i class='fa fa-code-fork fa-fw'></i> This blog on Github</a></li></ul><hr /><h3>Open Source</h3><div class="list-group"><a class="list-group-item list-group-item-action" href="https://github.com/twbs/bootstrap-sass"><h4 class="list-group-item-heading">Bootstrap for Sass</h4><p class="list-group-item-text">Port of Twitter Bootstrap web framework to Sass language, automatically generated from the LESS version.</p></a><a class="list-group-item list-group-item-action" href="https://github.com/glebm/i18n-tasks"><h4 class="list-group-item-heading">i118n-tasks</h4><p class="list-group-item-text">Manage translation and localization with static analysis, for Ruby i18n.</p></a><a class="list-group-item list-group-item-action" href="https://github.com/glebm/order_query"><h4 class="list-group-item-heading">order_query</h4><p class="list-group-item-text">ActiveRecord ORM extension to find next or previous records relative to the current one efficiently.</p></a></div></aside></div></div></div><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></script></body></html>